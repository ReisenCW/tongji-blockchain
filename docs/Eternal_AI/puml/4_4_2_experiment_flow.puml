@startuml
participant "用户" as User
participant "Planner Agent" as Planner
participant "Worker Agent 1" as Worker1
participant "Worker Agent 2" as Worker2
participant "SquadManager 合约" as SquadManager

User -> Planner: 提交复杂任务
activate Planner
Planner -> Planner: 任务拆解
Planner -> SquadManager: delegateTask(T1)
activate SquadManager
SquadManager -> Worker1: 接收子任务 T1
deactivate SquadManager
Planner -> SquadManager: delegateTask(T2)
activate SquadManager
SquadManager -> Worker2: 接收子任务 T2
deactivate SquadManager

activate Worker1
Worker1 -> Worker1: 执行 T1
Worker1 -> Planner: 返回 T1 结果
deactivate Worker1

activate Worker2
Worker2 -> Worker2: 执行 T2
Worker2 -> Planner: 返回 T2 结果
deactivate Worker2

Planner -> Planner: 汇总所有子任务结果
Planner -> User: 返回最终报告
deactivate Planner
@enduml
